<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor - PWA</title>
    <!-- 1. PWA: Link para o arquivo de manifesto (necessário para instalação) -->
    <link rel="manifest" href="manifest.json">
    <!-- 2. PWA: Define as cores do navegador (Android e iOS) -->
    <meta name="theme-color" content="#4F46E5">

    <!-- Carrega o Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configuração do Tailwind para usar a fonte Inter e cores personalizadas
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4F46E5', // Indigo 600
                        'secondary': '#FBBF24', // Amber 400
                        'impostor-bg': '#EF4444', // Red 500
                        'question-bg': '#10B981', // Emerald 500
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Estilos personalizados para o app */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 420px; /* Largura ideal para celular */
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            background-color: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-radius: 0;
        }
        .button {
            padding: 1rem 1.5rem;
            font-size: 1.125rem;
            font-weight: 700;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        .button:hover {
            opacity: 0.9;
            box-shadow: 0 6px 8px -2px rgba(0, 0, 0, 0.2);
        }
        .select-input {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>');
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5em;
        }
    </style>
</head>
<body>

    <div id="app-container" class="container">
        <!-- O conteúdo será gerado dinamicamente aqui -->
        <h1 id="main-title" class="text-3xl font-extrabold text-gray-900 text-center mb-6">Impostor da Palavra</h1>

        <div id="game-screens" class="flex-grow flex flex-col justify-center items-center text-center">
            <!-- Tela Inicial: Configuração do Jogo (Injetada pelo JS ao carregar) -->
        </div>

        <p id="footer-note" class="text-xs text-gray-400 text-center mt-6">Desenvolvido com foco na privacidade de cada jogador.</p>
    </div>

    <script>
        // 3. PWA: Registra o Service Worker para habilitar o modo offline
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha no registro do ServiceWorker:', error);
                    });
            });
        }
        
        // Variáveis globais do jogo
        const NUM_QUESTION_ROUNDS = 3; // Total de rodadas no modo pergunta
        
        // Estado inicial do idioma
        let currentLanguage = 'PT'; 

        // ------------------------------------
        // BANCOS DE TRADUÇÕES E PALAVRAS
        // ------------------------------------
        
        // Define as chaves de categoria padronizadas
        const CATEGORY_KEYS = {
            ALL: 'ALL', // Categoria especial
            PEOPLE: 'PEOPLE', // Chave interna para Celebridades/Pessoas/Personagens
            PLACES: 'PLACES',
            OBJECTS: 'OBJECTS',
            FOOD: 'FOOD'
        };

        // Objeto de tradução para todos os textos da interface
        const translations = {
            PT: {
                title: "Impostor",
                select_language: "Selecione o Idioma:",
                select_category: "Escolha a Categoria:",
                category_ALL: "Tema aleatório",
                // CATEGORIAS EXPANDIDAS
                category_PEOPLE: "Pessoas", 
                category_PLACES: "Locais",
                category_OBJECTS: "Objetos",
                category_FOOD: "Comidas",
                player_count: "Quantos jogadores?",
                select_impostor_count: "Número de Impostores:",
                impostor_count_random: "Aleatório.Ninguém Saberá!",
                button_start_distribution: "INICIAR DISTRIBUIÇÃO",
                player: "Jogador",
                instruction_reveal: "Pegue o celular e clique abaixo para ver sua palavra.",
                button_reveal_my_word: "REVELAR MINHA PALAVRA",
                instruction_dont_show: "NÃO DEIXE NINGUÉM VER!",
                impostor: "IMPOSTOR",
                title_is_impostor: "VOCÊ É O IMPOSTOR!",
                title_your_word_is: "SUA PALAVRA É:",
                instruction_memorize: "Memorize bem!",
                button_next_player: "PRÓXIMO JOGADOR",
                button_ready_to_choose_mode: "PRONTO PARA ESCOLHER O MODO",
                title_choose_mode: "ESCOLHA O MODO DE JOGO",
                instruction_roles_distributed: "A distribuição de papéis terminou.",
                mode_discussion: "DISCUSSÃO ABERTA",
                mode_discussion_desc: "Os jogadores debatem livremente.",
                mode_questions: "MODO PERGUNTAS (3 RODADAS)",
                mode_questions_desc: "O celular guia o debate com perguntas temáticas.",
                button_restart: "RECOMEÇAR TUDO",
                title_discussion_open: "DISCUSSÃO ABERTA!",
                instruction_start_debate: "Comecem a conversar e debater para tentar encontrar o Impostor!",
                instruction_word_hidden: "*A PALAVRA SECRETA ESTÁ OCULTA.*",
                instruction_reveal_click: "Clique abaixo APENAS após a votação para confirmar a palavra.",
                button_reveal_word: "REVELAR PALAVRA SECRETA",
                title_round: "RODADA",
                question_for_all: "PERGUNTA PARA TODOS:",
                instruction_answer_one_by_one: "Cada jogador deve responder a pergunta, um de cada vez.",
                button_start_round: "INICIAR RODADA ",
                button_end_questions: "FIM DAS PERGUNTAS (INICIAR VOTAÇÃO)",
                title_voting: "VOTAÇÃO!",
                instruction_questions_end: "As 3 rodadas de perguntas terminaram. Debatam por um instante e votem para encontrar o Impostor!",
                title_word_revealed: "PALAVRA REVELADA!",
                instruction_word_was: "A palavra secreta era:",
                button_start_new_game: "INICIAR NOVO JOGO",
                error_title: "Erro",
                error_min_players: "O jogo requer no mínimo 3 jogadores.",
                error_empty_wordlist: "A lista de palavras para a categoria selecionada está vazia.",
                error_impostor_count: "O jogo requer que o número de Impostores seja no máximo 1 a menos que o número total de jogadores, e pelo menos 1. Para [P] jogadores, o máximo é [M].", 
                button_understood: "Entendi",
                footer_note: "Desenvolvido com foco na privacidade de cada jogador.",
            },
            EN: {
                title: "The Impostor",
                select_language: "Select Language:",
                select_category: "Choose the Category:",
                category_ALL: "Everything",
                // CATEGORIAS EXPANDIDAS
                category_PEOPLE: "People",
                category_PLACES: "Locations",
                category_OBJECTS: "Objects",
                category_FOOD: "Food",
                player_count: "How many players?",
                select_impostor_count: "Number of Impostors:",
                impostor_count_random: "Random.No One Will Know!",
                button_start_distribution: "START DISTRIBUTION",
                player: "Player",
                instruction_reveal: "Grab the phone and click below to reveal your word.",
                button_reveal_my_word: "REVEAL MY WORD",
                instruction_dont_show: "DON'T LET ANYONE SEE!",
                impostor: "IMPOSTOR",
                title_is_impostor: "YOU ARE THE IMPOSTOR!",
                title_your_word_is: "YOUR WORD IS:",
                instruction_memorize: "Memorize it well!",
                button_next_player: "NEXT PLAYER",
                button_ready_to_choose_mode: "READY TO CHOOSE MODE",
                title_choose_mode: "CHOOSE GAME MODE",
                instruction_roles_distributed: "Role distribution is complete.",
                mode_discussion: "OPEN DISCUSSION",
                mode_discussion_desc: "Players debate freely.",
                mode_questions: "QUESTION MODE (3 ROUNDS)",
                mode_questions_desc: "The phone guides the debate with themed questions.",
                button_restart: "RESTART EVERYTHING",
                title_discussion_open: "OPEN DISCUSSION!",
                instruction_start_debate: "Start talking and debating to find the Impostor!",
                instruction_word_hidden: "*THE SECRET WORD IS HIDDEN.*",
                instruction_reveal_click: "Click below ONLY after the voting to confirm the word.",
                button_reveal_word: "REVEAL SECRET WORD",
                title_round: "ROUND",
                question_for_all: "QUESTION FOR EVERYONE:",
                instruction_answer_one_by_one: "Each player must answer the question, one by one.",
                button_start_round: "START ROUND ",
                button_end_questions: "END QUESTIONS (START VOTING)",
                title_voting: "VOTING!",
                instruction_questions_end: "The 3 question rounds are over. Debate briefly and vote to find the Impostor!",
                title_word_revealed: "WORD REVEALED!",
                instruction_word_was: "The secret word was:",
                button_start_new_game: "START NEW GAME",
                error_title: "Error",
                error_min_players: "The game requires a minimum of 3 players.",
                error_empty_wordlist: "The word list for the selected category is empty.",
                error_impostor_count: "The number of Impostors must be at most 1 less than the total number of players, and at least 1. For [P] players, the maximum is [M].",
                button_understood: "Understood",
                footer_note: "Developed with focus on each player's privacy.",
            }
        };

        // Banco de Palavras EXPANDIDO
        const wordBankPT = {
            // Categoria PESSOAS/PERSONAGENS - NOVAS PALAVRAS ADICIONADAS
            [CATEGORY_KEYS.PEOPLE]: [
                "Seu Pai", "Sua Mãe", "Seu Irmão", "Sua Irmã", "Seu Avô", "Sua Avó", "Seu Chefe", "Sua Professora Favorita", "O Zelador da Escola", "O Gênio da Lâmpada", "A Morte", "Batman", "Homem-Aranha", "Cebolinha", "Mônica", "Cascão", "Magali", "Chico Bento", "Papai Noel", "Coelho da Páscoa", "Harry Potter", "Hermione", "Dumbledore", "Darth Vader", "Luke Skywalker", "Princesa Leia", "Goku", "Vegeta", "Bulma", "Naruto", "Sasuke", "Sakura", "Beyoncé", "Lady Gaga", "Justin Bieber", "Michael Jackson", "Madonna", "Elvis Presley", "Albert Einstein", "Isaac Newton", "Nikola Tesla", "Steve Jobs", "Elon Musk", "Bill Gates", "Chico Xavier", "Padre Marcelo Rossi", "Jesus", "Maria", "José", "Papa Francisco", "Gandhi", "Barack Obama", "Rainha Elizabeth", "Rei Arthur", "Merlin", "Lobo Mau", "Chapeuzinho Vermelho", "Shrek", "Fiona", "Burro do Shrek", "Olaf", "Elsa", "Anna", "Capitão América", "Homem de Ferro", "Viúva Negra", "Thor", "Hulk", "Doutor Estranho", "Pantera Negra", "Coringa", "Arlequina", "Flash", "Aquaman", "Super-Homem", "Kratos", "Mario", "Luigi", "Princesa Peach", "Sonic", "Pikachu", "Ash Ketchum", "Soneca", "Zangado", "Branca de Neve", "Aladdin", "Jasmine", "Gênio Azul", "Jack Sparrow", "Capitão Gancho", "Pequena Sereia", "Simba", "Timão", "Pumba", "Tarzan", "Jane", "Mogli", "Dora Aventureira", "Colega de Trabalho", "A Pessoa que Sempre Chega Atrasada"
            ],
            // Categoria LOCAIS/AMBIENTES - NOVAS PALAVRAS ADICIONADAS
            [CATEGORY_KEYS.PLACES]: [
                "Sua Casa de Infância", "Casa da Vovó", "O Quintal de Casa", "A Escola Antiga", "O Escritório", "A Sala de Aula", "O Laboratório de Ciências", "O Ginásio da Escola", "A Biblioteca", "Sorveteria", "Parque da Cidade", "Praça Central", "Estádio de Futebol", "Barzinho de Esquina", "Uma Balada", "Um Cinema Antigo", "Um Museu", "Um Teatro", "A Praia", "A Montanha", "Fazenda Abandonada", "A Roça", "Cemitério", "A Lua", "Marte", "Polo Norte", "Polo Sul", "Deserto do Saara", "O Inferno", "O Paraíso", "Torre Eiffel", "Coliseu", "Egito Antigo", "Pirâmides", "Muralha da China", "Floresta Amazônica", "Pantanal", "Selva Africana", "Ilha do Tesouro", "Caribe", "Navio Pirata", "Base Espacial", "Caverna Submersa", "Vulcão Ativo", "Fundo do Mar", "Toca do Coelho", "País das Maravilhas", "Hogwarts", "Terra Média", "Gotham City", "Metrópolis", "Wakanda", "Asgard", "Olimpo", "Monte Everest", "Motel de Estrada", "Hospital", "Prisão", "Banco Central", "Mercado Municipal", "Padaria da Esquina", "Cozinha da Sua Mãe", "Quartel", "Porto", "Aeroporto", "Estação de Trem", "Submarino", "Castelo Assombrado", "Circo", "Zoológico", "Fábrica Abandonada", "Laboratório Secreto", "Shopping Lotado", "Jardim da Infância", "Ponte Suspensa", "Campo de Batalha", "Egito do Futuro", "Dimensão Paralela", "Buraco Negro", "Espaço Profundo", "Planeta Desconhecido", "Cabana na Neve", "Apartamento Pequeno", "Banheiro Público", "Igreja Antiga", "Palácio de Buckingham", "Castelo de Areia", "Ilha Deserta", "Subúrbio", "Favela", "Condomínio de Luxo", "Rua Escura", "Farol", "Campo de Girassóis", "Jardim Secreto", "Toca do Hobbit", "Shopping da Cidade", "Torre de Controle", "Sótão Esquecido", "Porão Misterioso"
            ],
            [CATEGORY_KEYS.OBJECTS]: [
               "Celular", "Faca", "Chave", "Travesseiro", "Lâmpada", "Bicicleta", "Óculos", "Teclado", "Controle Remoto", "Caderno", "Caneta", "Borracha", "Mochila", "Relógio", "Sapato Velho", "Tênis Rasgado", "Meia Desparelhada", "Livro Antigo", "Grampeador", "Tesoura", "Vassoura", "Espada Mágica", "Varinha", "Chapéu de Bruxa", "Guarda-Chuva", "Copo Quebrado", "Espelho Trincado", "Bola Furada", "Corda", "Lanterna", "Martelo", "Chave Inglesa", "Mochila de Viagem", "Fone de Ouvido", "Notebook", "Pen Drive", "Calculadora", "Fita Adesiva", "Papel Amassado", "Foto Antiga", "Rádio", "Gravador", "Controle de Videogame", "Boneco de Neve", "Brinquedo Quebrado", "Carrinho de Controle Remoto", "Quebra-Cabeça Incompleto", "Espada de Luz", "Escudo", "Capa de Herói", "Capacete", "Placa de Circuito", "Microfone", "Câmera Fotográfica", "Espelho Mágico", "Lupa", "Robô de Lata", "Tablet", "Controle de TV", "TV Antiga", "Disco de Vinil", "Fita Cassete", "Rádio Relógio", "Forno de Micro-ondas", "Torradeira", "Xícara de Café", "Garrafa de Água", "Copo de Vidro", "Colher", "Garfo", "Prato Rachado", "Panela Velha", "Fogão", "Geladeira", "Aspirador de Pó", "Ferro de Passar", "Máquina de Costura", "Lâmpada Queimada", "Abajur", "Tapete Voador", "Telefone Antigo", "Quadro", "Moldura Quebrada", "Janela", "Porta Trancada", "Cama Desarrumada", "Cadeira Bamba", "Mesa de Madeira", "Caixa Misteriosa", "Mala Velha", "Cofre Fechado", "Corrente Enferrujada", "Pingente", "Anel", "Brinco Perdido", "Pulseira de Miçangas", "Chapéu Panamá", "Livro de Feitiços", "Globo Terrestre", "Relógio de Bolso"
            ],
            [CATEGORY_KEYS.FOOD]: [
                "Feijoada", "Sushi", "Hambúrguer", "Lasanha", "Chocolate", "Brigadeiro", "Açaí", "Pão Francês", "Ovo Frito", "Pizza", "Pastel", "Churros", "Pudim", "Rabanada", "Pipoca", "Batata Frita", "Coxinha", "Empada", "Quibe", "Esfiha", "Panqueca", "Macarronada", "Strogonoff", "Feijão Tropeiro", "Arroz de Carreteiro", "Arroz com Pequi", "Moqueca", "Bobó de Camarão", "Peixe Assado", "Bife à Parmegiana", "Frango Grelhado", "Omelete", "Salada de Frutas", "Sorvete", "Milkshake", "Torta de Limão", "Pavê", "Mousse de Maracujá", "Pão de Queijo", "Croissant", "Donuts", "Panetone", "Paçoca", "Cocada", "Pé de Moleque", "Tapioca", "Cuscuz", "Acarajé", "Vatapá", "Baião de Dois", "Farofa", "Polenta", "Purê de Batata", "Carne de Panela", "Ensopado", "Caldo Verde", "Canjica", "Mingau", "Pipoca Doce", "Chocolate Quente", "Café com Leite", "Chá Gelado", "Suco de Laranja", "Guaraná", "Refrigerante", "Água de Coco", "Caipirinha", "Vinho Tinto", "Cerveja", "Espumante", "Uva", "Maçã", "Banana", "Melancia", "Manga", "Abacaxi", "Kiwi", "Morango", "Framboesa", "Limão", "Maracujá", "Abacate", "Batata Doce", "Mandioca", "Inhame", "Cenoura", "Beterraba", "Brócolis", "Couve", "Tomate", "Alface", "Milho Verde", "Pamonha", "Curau", "Bolacha Recheada", "Bolo de Cenoura com Chocolate", "Bolo de Fubá", "Bolo de Milho", "Pizza de Chocolate"
            ]
        };
        const wordBankEN = {
            // Categoria PEOPLE/CHARACTERS - Corresponding English updates
            [CATEGORY_KEYS.PEOPLE]: [
                "Your Mom", "Your Dad", "Your Brother", "Your Sister", "Your Grandpa", "Your Grandma", "Your Boss", "Your Favorite Teacher", "The School Janitor", "The Genie", "Death", "Batman", "Spider-Man", "Cebolinha", "Monica", "Cascão", "Magali", "Chico Bento", "Santa Claus", "The Easter Bunny", "Harry Potter", "Hermione", "Dumbledore", "Darth Vader", "Luke Skywalker", "Princess Leia", "Goku", "Vegeta", "Bulma", "Naruto", "Sasuke", "Sakura", "Beyoncé", "Lady Gaga", "Justin Bieber", "Michael Jackson", "Madonna", "Elvis Presley", "Albert Einstein", "Isaac Newton", "Nikola Tesla", "Steve Jobs", "Elon Musk", "Bill Gates", "Chico Xavier", "Father Marcelo Rossi", "Jesus", "Mary", "Joseph", "Pope Francis", "Gandhi", "Barack Obama", "Queen Elizabeth", "King Arthur", "Merlin", "The Big Bad Wolf", "Little Red Riding Hood", "Shrek", "Fiona", "Donkey", "Olaf", "Elsa", "Anna", "Captain America", "Iron Man", "Black Widow", "Thor", "Hulk", "Doctor Strange", "Black Panther", "The Joker", "Harley Quinn", "The Flash", "Aquaman", "Superman", "Kratos", "Mario", "Luigi", "Princess Peach", "Sonic", "Pikachu", "Ash Ketchum", "Sleepy", "Grumpy", "Snow White", "Aladdin", "Jasmine", "Blue Genie", "Jack Sparrow", "Captain Hook", "Ariel", "Simba", "Timon", "Pumbaa", "Tarzan", "Jane", "Mowgli", "Dora the Explorer", "Your Co-worker", "That One Always Late Person"
            ],
            // Categoria LOCATIONS/ENVIRONMENTS - Corresponding English updates
            [CATEGORY_KEYS.PLACES]: [
              "Your Childhood Home", "Grandma's House", "Your Backyard", "Your Old School", "The Office", "The Classroom", "The Science Lab", "The School Gym", "The Library", "Ice Cream Shop", "City Park", "Town Square", "Soccer Stadium", "Corner Bar", "A Nightclub", "An Old Movie Theater", "A Museum", "A Theater", "The Beach", "The Mountain", "Abandoned Farm", "The Countryside", "Cemetery", "The Moon", "Mars", "The North Pole", "The South Pole", "Sahara Desert", "Hell", "Heaven", "Eiffel Tower", "The Colosseum", "Ancient Egypt", "The Pyramids", "Great Wall of China", "Amazon Rainforest", "The Wetlands", "African Jungle", "Treasure Island", "The Caribbean", "Pirate Ship", "Space Station", "Underwater Cave", "Active Volcano", "Ocean Floor", "Rabbit Hole", "Wonderland", "Hogwarts", "Middle-earth", "Gotham City", "Metropolis", "Wakanda", "Asgard", "Mount Olympus", "Mount Everest", "Roadside Motel", "Hospital", "Prison", "Central Bank", "Public Market", "Corner Bakery", "Your Mom's Kitchen", "Army Base", "Harbor", "Airport", "Train Station", "Submarine", "Haunted Castle", "Circus", "Zoo", "Abandoned Factory", "Secret Lab", "Busy Shopping Mall", "Kindergarten", "Suspension Bridge", "Battlefield", "Future Egypt", "Parallel Dimension", "Black Hole", "Deep Space", "Unknown Planet", "Cabin in the Snow", "Small Apartment", "Public Bathroom", "Ancient Church", "Buckingham Palace", "Sand Castle", "Desert Island", "Suburbs", "Favela", "Luxury Condo", "Dark Alley", "Lighthouse", "Sunflower Field", "Secret Garden", "Hobbit Hole", "City Mall", "Control Tower", "Dusty Attic", "Creepy Basement"
            ],
            [CATEGORY_KEYS.OBJECTS]: [
               "Phone", "Knife", "Key", "Pillow", "Lamp", "Bicycle", "Glasses", "Keyboard", "Remote Control", "Notebook", "Pen", "Eraser", "Backpack", "Watch", "Old Shoe", "Worn-out Sneakers", "Mismatched Sock", "Old Book", "Stapler", "Scissors", "Broom", "Magic Sword", "Wand", "Witch Hat", "Umbrella", "Broken Cup", "Cracked Mirror", "Flat Ball", "Rope", "Flashlight", "Hammer", "Wrench", "Travel Backpack", "Headphones", "Laptop", "USB Drive", "Calculator", "Tape Roll", "Crumpled Paper", "Old Photo", "Radio", "Voice Recorder", "Game Controller", "Snowman", "Broken Toy", "Remote Car", "Unfinished Puzzle", "Lightsaber", "Shield", "Hero Cape", "Helmet", "Circuit Board", "Microphone", "Camera", "Magic Mirror", "Magnifying Glass", "Tin Robot", "Tablet", "TV Remote", "Old TV", "Vinyl Record", "Cassette Tape", "Clock Radio", "Microwave", "Toaster", "Coffee Mug", "Water Bottle", "Glass Cup", "Spoon", "Fork", "Cracked Plate", "Old Pan", "Stove", "Refrigerator", "Vacuum Cleaner", "Iron", "Sewing Machine", "Burnt Bulb", "Lamp Shade", "Flying Carpet", "Old Telephone", "Painting", "Broken Frame", "Window", "Locked Door", "Messy Bed", "Wobbly Chair", "Wooden Table", "Mystery Box", "Old Suitcase", "Closed Safe", "Rusty Chain", "Pendant", "Ring", "Lost Earring", "Beaded Bracelet", "Panama Hat", "Spell Book", "Globe", "Pocket Watch"
            ],
            [CATEGORY_KEYS.FOOD]: [
"Cowboy Beans", "Sushi", "Burger", "Lasagna", "Chocolate", "Brigadeiro", "Açaí Bowl", "French Bread", "Fried Egg", "Pizza", "Pastel", "Churros", "Pudding", "French Toast", "Popcorn", "French Fries", "Chicken Nugget", "Empanada", "Kebab", "Falafel", "Pancake", "Spaghetti", "Beef Stroganoff", "Chili Beans", "Risotto", "Curry Rice", "Fish Stew", "Shrimp Soup", "Grilled Fish", "Chicken Parmesan", "Grilled Chicken", "Omelet", "Fruit Salad", "Ice Cream", "Milkshake", "Lemon Pie", "Tiramisu", "Passion Fruit Mousse", "Cheese Bread", "Croissant", "Donut", "Panettone", "Peanut Candy", "Coconut Candy", "Honeycomb Candy", "Tapioca Pancake", "Couscous", "Taco", "Guacamole", "Jambalaya", "Fried Rice", "Mashed Potatoes", "Beef Stew", "Vegetable Soup", "Chicken Soup", "Corn Chowder", "Rice Pudding", "Sweet Popcorn", "Hot Chocolate", "Coffee with Milk", "Iced Tea", "Orange Juice", "Soda", "Coconut Water", "Mojito", "Red Wine", "Beer", "Champagne", "Grapes", "Apple", "Banana", "Watermelon", "Mango", "Pineapple", "Kiwi", "Strawberry", "Raspberry", "Lemon", "Passion Fruit", "Avocado", "Sweet Potato", "Cassava", "Taro", "Carrot", "Beetroot", "Broccoli", "Kale", "Tomato", "Lettuce", "Corn", "Tamale", "Corn Custard", "Oreo Cookie", "Carrot Cake with Chocolate", "Corn Cake", "Chocolate Cake", "Nutella Pizza"
            ]
        };
        
        // NOVO: Banco de Perguntas Categorizadas e LÚDICAS (Corrigidas)
        // As perguntas foram mantidas flexíveis para se adequarem às novas palavras.
        const questionBankPT = {
            [CATEGORY_KEYS.PEOPLE]: [
                "Como essa pessoa te faz sentir?",
"O que você costuma fazer quando está com essa pessoa?",
"Qual seria um bom presente para ela?",
"Como você descreveria o estilo dela?",
"Se ela entrasse em um lugar, o que chamaria atenção primeiro?",
"Qual seria uma boa música tema para essa pessoa?",
"Se essa pessoa tivesse um superpoder, qual seria?",
"Como você imagina o tom de voz dela?",
"O que ela faz em um dia comum?",
"Se fosse um personagem de filme, de que gênero seria?",
"Essa pessoa gosta mais de se destacar ou de passar despercebida?",
"Que tipo de roupa combina com ela?",
"Como ela reage a uma surpresa?",
"O que essa pessoa provavelmente diria em uma situação difícil?",
"Que tipo de energia essa pessoa transmite?",
"O que ela faria numa festa?",
"Se você tivesse que confiar algo importante, confiaria nela?",
"Qual seria um hobby típico dessa pessoa?",
"Como ela se comporta em público?",
"Se essa pessoa tivesse um lema de vida, qual seria?"
            ],
            [CATEGORY_KEYS.PLACES]: [
                "Qual é a primeira sensação que vem à mente quando você está nesse lugar?",
"Que tipo de som você ouviria ali?",
"Qual seria o clima ideal para esse lugar?",
"Como é a iluminação nesse ambiente?",
"O que normalmente acontece nesse lugar?",
"Qual seria o cheiro mais marcante aí?",
"Que tipo de pessoa você encontraria nesse local?",
"Se esse lugar fosse uma cor, qual seria?",
"O que as pessoas costumam fazer quando estão ali?",
"Você se sente confortável ou tenso nesse lugar?",
"Qual é o melhor horário para estar lá?",
"Que tipo de roupa faz sentido usar nesse lugar?",
"Esse é um lugar silencioso ou movimentado?",
"Se você fosse tirar uma foto ali, o que tentaria capturar?",
"Qual seria a trilha sonora desse lugar?",
"O que esse lugar te lembra da infância?",
"Qual seria a pior coisa que poderia acontecer ali?",
"O que te faz querer sair ou ficar nesse lugar?",
"Se esse lugar falasse, o que ele diria?",
"O que muda nesse lugar com o passar do tempo?"
            ],
            [CATEGORY_KEYS.OBJECTS]: [
              "Como você descreveria a textura desse objeto?",
"Qual seria o som que ele faz?",
"O que você normalmente faz com esse objeto?",
"Em que tipo de lugar ele é mais útil?",
"Qual é o material mais provável dele ser feito?",
"Se ele tivesse sentimentos, como se sentiria sendo usado?",
"O que aconteceria se esse objeto desaparecesse?",
"Que cor combina mais com ele?",
"Esse objeto tem alguma relação com tecnologia?",
"Como ele se comporta quando está em movimento?",
"Que tipo de pessoa usaria esse objeto com frequência?",
"Como você cuidaria para conservar esse objeto?",
"Qual é o maior risco envolvendo esse objeto?",
"Se ele tivesse um cheiro, qual seria?",
"Esse objeto costuma ser leve ou pesado?",
"Ele é mais pessoal ou coletivo?",
"Qual seria uma versão de luxo dele?",
"Como ele poderia ser usado de um jeito inesperado?",
"O que esse objeto ‘diria’ se pudesse falar?",
"O que ele representa no dia a dia das pessoas?"
            ],
            [CATEGORY_KEYS.FOOD]: [
"Qual é a sensação de pensar nessa comida?",
"Que tipo de memória ela desperta?",
"Como é o clima ao redor quando ela aparece?",
"Se ela fosse uma pessoa, como seria?",
"Que emoção combina com ela?",
"Como o ambiente muda quando ela está presente?",
"Se tivesse um som, qual seria?",
"O que as pessoas costumam fazer enquanto comem isso?",
"Que tipo de lembrança essa comida cria?",
"Como ela afeta o humor de quem a prova?",
"Se essa comida tivesse uma história, qual seria?",
"O que essa comida diria sobre quem a fez?",
"Como ela transforma um momento simples?",
"O que vem à cabeça quando você pensa nela?",
"Se ela fosse uma cor, qual seria?",
"Como ela se comporta em um encontro entre amigos?",
"Que tipo de lugar combina com essa comida?",
"Como ela faria alguém se sentir acolhido?",
"Se essa comida tivesse uma música tema, qual seria?",
"Que tipo de emoção fica depois que ela acaba?"
            ]
        };
        
        const questionBankEN = {
            [CATEGORY_KEYS.PEOPLE]: [
"How does this person make you feel when you think of them?",
"If this person were a season, which one would they be?",
"What kind of energy does this person give off?",
"What do you imagine a typical day looks like for them?",
"If this person were a sound, what would it be?",
"How would they react to something unexpected?",
"What kind of place suits this person best?",
"What’s something they would always carry with them?",
"How do they behave in a new environment?",
"What do they value most in life?",
"What emotion do you associate with them?",
"If they were a color, what would it be?",
"What kind of memory do you have of them?",
"What could you learn from this person?",
"How would they react to good news?",
"If they had a motto, what would it be?",
"How do they influence people around them?",
"What kind of music fits their personality?",
"What would change if they disappeared for a day?",
"What’s the rhythm of this person’s life?"
            ],
            [CATEGORY_KEYS.PLACES]: [
               "What’s the first feeling that comes to mind in this place?",
"What kind of sounds can be heard there?",
"What kind of energy does this place have?",
"How does it feel to be there alone?",
"If this place had a smell, what would it be?",
"What do people usually do there without rushing?",
"How does time seem to pass in this place?",
"What kind of memory does this place awaken?",
"How do you feel when leaving this place?",
"If this place had a personality, what would it be like?",
"What’s something that would never happen there?",
"How does it change throughout the day?",
"How would you describe the light in this place?",
"If this place could speak, what would it say?",
"How does this place react to people’s presence?",
"What can be heard in the distance when you’re there?",
"What feeling stays with you after visiting?",
"If this place were an emotion, which one would it be?",
"How would it feel to return there after a long time?",
"What makes this place unforgettable?"
            ],
            [CATEGORY_KEYS.OBJECTS]: [
"What’s the feeling of touching this object?",
"What kind of sound does it make when used?",
"What does it represent to the person who owns it?",
"What kind of care does it need?",
"If it had a personality, what would it be like?",
"What might it ‘think’ about its owner?",
"How does it change over time?",
"What kind of memory could it hold?",
"What would it do if it were free?",
"How does it behave when no one’s watching?",
"What emotion does this object bring?",
"Where would it feel out of place?",
"How does it fit into people’s daily lives?",
"If it were an animal, which one would it be?",
"What would happen if it suddenly disappeared?",
"What sound would you hear when someone interacts with it?",
"How would it react to being forgotten?",
"What kind of story could it tell?",
"What makes this object unique?",
"How would you know it’s nearby without seeing it?",
            ],
            [CATEGORY_KEYS.FOOD]: [
"What’s the feeling of thinking about this food?",
"What kind of memory does it bring?",
"What’s the atmosphere like when it’s around?",
"If this food were a person, what would they be like?",
"What emotion fits this food best?",
"How does the environment change when it’s served?",
"If it had a sound, what would it be?",
"What do people usually do while eating it?",
"What kind of memory does it create?",
"How does it affect someone’s mood?",
"If this food had a story, what would it tell?",
"What would this food say about the person who made it?",
"How can it transform a simple moment?",
"What comes to mind when you think of it?",
"If it were a color, what would it be?",
"How does it behave in a gathering of friends?",
"What kind of place fits this food best?",
"How could it make someone feel comforted?",
"If it had a theme song, what would it sound like?",
"What emotion stays after it’s gone?"
            ]
        };

        // Mapeamento dos Bancos por Idioma
        const gameBanks = {
            PT: { words: wordBankPT, questions: questionBankPT },
            EN: { words: wordBankEN, questions: questionBankEN }
        };

        // Variáveis de estado do jogo
        let playerCount = 0;
        let secretWord = "";
        let secretWordCategory = ""; // NOVO: Armazena a categoria da palavra secreta
        let roles = [];
        let currentPlayerIndex = 0;
        let currentQuestionRound = 0;
        let usedQuestions = []; 

        const screen = document.getElementById('game-screens');

        // Função utilitária para obter o texto no idioma atual
        function getT(key) {
            return translations[currentLanguage][key] || key;
        }

        // Função utilitária para embaralhar um array (Algoritmo Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // Função para gerar as opções de Impostor no seletor
        function getImpostorOptions(maxOption = 10) {
            let options = '';
            for (let i = 1; i <= maxOption; i++) {
                options += `<option value="${i}" ${i === 1 ? 'selected' : ''}>${i}</option>`;
            }
            options += `<option value="RANDOM">${getT('impostor_count_random')}</option>`;
            return options;
        }

        // Função que renderiza a tela inicial
        function renderSetupScreen() {
             // Atualiza o título principal e rodapé
            document.getElementById('main-title').textContent = getT('title');
            document.getElementById('footer-note').textContent = getT('footer_note');

             screen.innerHTML = `
                <div id="setup-screen" class="space-y-6 w-full max-w-xs">
                    
                    <p class="text-lg text-gray-700 font-semibold pt-4">${getT('select_language')}</p>
                    <select id="game-language" onchange="updateLanguage(this.value)" class="select-input w-full p-4 text-center text-xl border-2 border-primary rounded-xl focus:ring-primary focus:border-primary transition duration-150">
                        <option value="PT">Português</option>
                        <option value="EN">English</option>
                    </select>

                    <p class="text-lg text-gray-700 font-semibold mt-4">${getT('select_category')}</p>
                    <select id="game-category" class="select-input w-full p-4 text-center text-xl border-2 border-primary rounded-xl focus:ring-primary focus:border-primary transition duration-150">
                        <option value="${CATEGORY_KEYS.ALL}">${getT('category_ALL')}</option>
                        <option value="${CATEGORY_KEYS.PEOPLE}">${getT('category_PEOPLE')}</option>
                        <option value="${CATEGORY_KEYS.PLACES}">${getT('category_PLACES')}</option>
                        <option value="${CATEGORY_KEYS.OBJECTS}">${getT('category_OBJECTS')}</option>
                        <option value="${CATEGORY_KEYS.FOOD}">${getT('category_FOOD')}</option>
                    </select>

                    <p class="text-lg text-gray-700 font-semibold pt-4">${getT('player_count')}</p>
                    <input type="number" id="player-count" min="3" value="4" class="w-full p-4 text-center text-2xl border-2 border-primary rounded-xl focus:ring-primary focus:border-primary transition duration-150">
                    
                    <!-- CAMPO PARA NÚMERO DE IMPOSTORES -->
                    <p class="text-lg text-gray-700 font-semibold pt-4">${getT('select_impostor_count')}</p>
                    <select id="impostor-count" class="select-input w-full p-4 text-center text-xl border-2 border-primary rounded-xl focus:ring-primary focus:border-primary transition duration-150">
                        ${getImpostorOptions(3)}
                    </select>
                    
                    <button onclick="startGame()" class="button w-full bg-primary text-white hover:bg-indigo-700">
                        ${getT('button_start_distribution')}
                    </button>
                </div>
            `;
            // Define o valor do seletor para garantir que corresponda ao estado
            document.getElementById('game-language').value = currentLanguage;
        }

        // Função para atualizar o idioma e re-renderizar a tela de configuração
        function updateLanguage(lang) {
            currentLanguage = lang;
            renderSetupScreen();
        }


        // ------------------------------------
        // LÓGICA DE INICIALIZAÇÃO
        // ------------------------------------

        // 1. Inicia o Jogo
        function startGame() {
            const playerCountInput = document.getElementById('player-count');
            const categorySelect = document.getElementById('game-category');
            const impostorSelect = document.getElementById('impostor-count');
            
            // 1.1 Obter e validar o número de jogadores
            playerCount = parseInt(playerCountInput.value);
            if (playerCount < 3 || isNaN(playerCount)) {
                alertModal(getT('error_title'), getT('error_min_players'), 'impostor-bg');
                return;
            }
            
            // 1.2 Determinar o número de Impostores
            const impostorSetting = impostorSelect.value;
            let numImpostors = 0;
            
            // Máximo de impostores permitidos: Pelo menos 2 jogadores precisam saber a palavra (Palavra e Impostor).
            const maxImpostors = playerCount - 2; 

            if (maxImpostors < 1) {
                alertModal(getT('error_title'), getT('error_min_players'), 'impostor-bg');
                return;
            }

            if (impostorSetting === 'RANDOM') {
                // Aleatório: escolhe entre 1 e maxImpostors
                numImpostors = Math.floor(Math.random() * maxImpostors) + 1;
            } else {
                numImpostors = parseInt(impostorSetting);
                if (isNaN(numImpostors) || numImpostors < 1 || numImpostors > maxImpostors) {
                    const errorMessage = getT('error_impostor_count')
                        .replace('[P]', playerCount)
                        .replace('[M]', maxImpostors);
                    alertModal(getT('error_title'), errorMessage, 'impostor-bg');
                    return;
                }
            }
            
            // 1.3 Obter a lista de palavras e definir a categoria
            const requestedCategory = categorySelect.value;
            const wordBank = gameBanks[currentLanguage].words; 
            let wordsToUse = [];

            if (requestedCategory === CATEGORY_KEYS.ALL) {
                // Seleciona uma categoria aleatória
                const categoryKeys = Object.keys(wordBank).filter(k => k !== CATEGORY_KEYS.ALL);
                const randomCategoryKey = categoryKeys[Math.floor(Math.random() * categoryKeys.length)];
                secretWordCategory = randomCategoryKey;
                wordsToUse = wordBank[randomCategoryKey];
            } else if (wordBank[requestedCategory]) {
                secretWordCategory = requestedCategory;
                wordsToUse = wordBank[requestedCategory];
            }

            if (wordsToUse.length === 0) {
                alertModal(getT('error_title'), getT('error_empty_wordlist'), 'impostor-bg');
                return;
            }

            // 1.4 Selecionar a palavra secreta
            const wordIndex = Math.floor(Math.random() * wordsToUse.length);
            secretWord = wordsToUse[wordIndex].toUpperCase();
            
            // 1.5 Criar e embaralhar os papéis
            roles = Array(playerCount).fill(secretWord);
            
            // Seleciona índices únicos para os impostores
            const playerIndices = Array.from({length: playerCount}, (_, i) => i);
            shuffleArray(playerIndices); 
            
            for (let i = 0; i < numImpostors; i++) {
                const impostorIndex = playerIndices[i];
                roles[impostorIndex] = getT('impostor');
            }
            
            // Embaralhamento final para esconder os papéis
            shuffleArray(roles); 

            currentPlayerIndex = 0;
            renderPlayerViewScreen(); // Inicia a distribuição
        }

        // ------------------------------------
        // LÓGICA DE DISTRIBUIÇÃO
        // ------------------------------------

        // 2. Renderiza a Tela para o Jogador Pegar o Celular
        function renderPlayerViewScreen() {
            if (currentPlayerIndex >= playerCount) {
                renderModeSelectionScreen(); // Vai para a tela de seleção de modo
                return;
            }
            
            const playerNumber = currentPlayerIndex + 1;
            
            screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-white rounded-2xl shadow-xl space-y-8">
                    <h2 class="text-3xl font-bold text-gray-900">${getT('player')} ${playerNumber}</h2>
                    <p class="text-xl text-gray-700">${getT('instruction_reveal')}</p>
                    <button onclick="revealRole()" class="button w-full bg-primary text-white hover:bg-indigo-700">
                        ${getT('button_reveal_my_word')}
                    </button>
                    <p class="text-sm text-gray-500 pt-4">${getT('instruction_dont_show')}</p>
                </div>
            `;
        }

        // 3. Revela o Papel (Palavra ou Impostor)
        function revealRole() {
            const role = roles[currentPlayerIndex];
            const isImpostor = (role === getT('impostor'));
            const bgColor = isImpostor ? 'bg-impostor-bg' : 'bg-green-600';
            const titleText = isImpostor ? getT('title_is_impostor') : getT('title_your_word_is');
            
            // Define a próxima ação e texto do botão
            const nextAction = (currentPlayerIndex < playerCount - 1) ? "goToNextPlayer()" : "renderModeSelectionScreen()";
            const buttonText = (currentPlayerIndex < playerCount - 1) ? getT('button_next_player') : getT('button_ready_to_choose_mode');
            
            screen.innerHTML = `
                <div class="p-6 w-full max-w-md ${bgColor} text-white rounded-2xl shadow-xl space-y-8 min-h-[300px] flex flex-col justify-center items-center">
                    <h2 class="text-4xl font-extrabold">${titleText}</h2>
                    <p class="text-5xl font-black">${role}</p>
                    <p class="text-lg opacity-80 pt-4">${getT('instruction_memorize')}</p>
                </div>
                <button onclick="${nextAction}" class="button w-full mt-8 bg-primary text-white hover:bg-indigo-700">
                    ${buttonText}
                </button>
            `;
        }
        
        // Função para avançar o índice e chamar a próxima tela de jogador (Substitui o timer)
        function goToNextPlayer() {
            currentPlayerIndex++; 
            renderPlayerViewScreen(); 
        }

        // ------------------------------------
        // SELEÇÃO E INÍCIO DOS MODOS DE JOGO
        // ------------------------------------

        // 4. Tela de Seleção do Modo de Jogo 
        function renderModeSelectionScreen() {
            screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-white text-gray-900 rounded-2xl shadow-xl space-y-6">
                    <h2 class="text-3xl font-black text-primary">${getT('title_choose_mode')}</h2>
                    <p class="text-lg text-gray-700">${getT('instruction_roles_distributed')}</p>
                </div>
                
                <div class="space-y-4 w-full max-w-md mt-6">
                    <button onclick="startDiscussionMode()" class="button w-full bg-primary text-white hover:bg-indigo-700">
                        ${getT('mode_discussion')}
                        <span class="block text-sm font-normal opacity-80 mt-1">${getT('mode_discussion_desc')}</span>
                    </button>
                    <button onclick="startQuestionMode()" class="button w-full bg-question-bg text-white hover:bg-emerald-700">
                        ${getT('mode_questions')}
                        <span class="block text-sm font-normal opacity-80 mt-1">${getT('mode_questions_desc')}</span>
                    </button>
                    <button onclick="window.location.reload()" class="button w-full mt-4 bg-gray-400 text-gray-900 hover:bg-gray-500">
                        ${getT('button_restart')}
                    </button>
                </div>
            `;
            // Limpa o array de perguntas usadas para o novo jogo
            usedQuestions = [];
            currentQuestionRound = 0;
        }

        // 5. Modo: Discussão Aberta (Jogo original)
        function startDiscussionMode() {
            screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-primary text-white rounded-2xl shadow-xl space-y-6">
                    <h2 class="text-4xl font-black">${getT('title_discussion_open')}</h2>
                    <p class="text-xl">
                        ${getT('instruction_start_debate')}
                    </p>
                    <p class="text-lg font-semibold">
                        ${getT('instruction_word_hidden')}
                    </p>
                    <p class="text-sm opacity-80 pt-4">${getT('instruction_reveal_click')}</p>
                </div>
                <button onclick="revealSecretWord()" class="button w-full mt-8 bg-secondary text-gray-900 hover:bg-amber-500">
                    ${getT('button_reveal_word')}
                </button>
                <button onclick="window.location.reload()" class="button w-full mt-4 bg-gray-700 text-white hover:bg-gray-800">
                    ${getT('button_restart')}
                </button>
            `;
        }
        
        // 6. Modo: Perguntas (Nova Lógica)
        function startQuestionMode() {
            currentQuestionRound = 1;
            
            // Pega o banco de perguntas APENAS da categoria da palavra secreta
            const categorizedQuestionBank = gameBanks[currentLanguage].questions[secretWordCategory];
            
            // Embaralha as perguntas relevantes e seleciona as 3 que serão usadas
            shuffleArray(categorizedQuestionBank);
            usedQuestions = categorizedQuestionBank.slice(0, NUM_QUESTION_ROUNDS); 
            
            if (usedQuestions.length === 0) {
                 // Fallback caso a categoria selecionada (teoricamente não deve acontecer) não tenha perguntas.
                alertModal(getT('error_title'), "Erro: Sem perguntas para a categoria " + secretWordCategory, 'impostor-bg');
                return;
            }

            renderQuestionRound();
        }

        // 7. Renderiza a Tela da Rodada de Perguntas
        function renderQuestionRound() {
            if (currentQuestionRound > NUM_QUESTION_ROUNDS) {
                // Se as 3 rodadas acabaram, vai para a tela de debate/revelação final
                startDiscussionModeFinalStep(); 
                return;
            }

            const currentQuestion = usedQuestions[currentQuestionRound - 1];
            const nextButtonText = (currentQuestionRound < NUM_QUESTION_ROUNDS) ? 
                `${getT('button_start_round')} ${currentQuestionRound + 1}` : 
                getT('button_end_questions');
            const nextAction = (currentQuestionRound < NUM_QUESTION_ROUNDS) ? 
                "goToNextQuestion()" : 
                "startDiscussionModeFinalStep()";

            screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-question-bg text-white rounded-2xl shadow-xl space-y-6">
                    <h2 class="text-4xl font-black">${getT('title_round')} ${currentQuestionRound} de ${NUM_QUESTION_ROUNDS}</h2>
                    <p class="text-xl pt-4">${getT('question_for_all')}</p>
                    <p class="text-3xl font-bold italic">${currentQuestion}</p>
                    <p class="text-sm opacity-80 pt-4">${getT('instruction_answer_one_by_one')}</p>
                </div>
                <button onclick="${nextAction}" class="button w-full mt-8 bg-secondary text-gray-900 hover:bg-amber-500">
                    ${nextButtonText}
                </button>
            `;
        }

        // Avança para a próxima rodada de perguntas
        function goToNextQuestion() {
            currentQuestionRound++;
            renderQuestionRound();
        }

        // Passo final: Debate (após rodadas de pergunta)
        function startDiscussionModeFinalStep() {
             screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-primary text-white rounded-2xl shadow-xl space-y-6">
                    <h2 class="text-4xl font-black">${getT('title_voting')}</h2>
                    <p class="text-xl">
                        ${getT('instruction_questions_end')}
                    </p>
                    <p class="text-lg font-semibold">
                        ${getT('instruction_word_hidden')}
                    </p>
                    <p class="text-sm opacity-80 pt-4">${getT('instruction_reveal_click')}</p>
                </div>
                <button onclick="revealSecretWord()" class="button w-full mt-8 bg-secondary text-gray-900 hover:bg-amber-500">
                    ${getT('button_reveal_word')}
                </button>
                <button onclick="window.location.reload()" class="button w-full mt-4 bg-gray-700 text-white hover:bg-gray-800">
                    ${getT('button_restart')}
                </button>
            `;
        }

        // 8. Revelação Final da Palavra
        function revealSecretWord() {
             screen.innerHTML = `
                <div class="p-6 w-full max-w-md bg-green-700 text-white rounded-2xl shadow-xl space-y-6">
                    <h2 class="text-4xl font-black">${getT('title_word_revealed')}</h2>
                    <p class="text-xl">
                        ${getT('instruction_word_was')}
                    </p>
                    <p class="text-5xl font-black">${secretWord}</p>
                </div>
                <button onclick="window.location.reload()" class="button w-full mt-8 bg-primary text-white hover:bg-indigo-700">
                    ${getT('button_start_new_game')}
                </button>
            `;
        }
        
        // 9. Modal de Erro Simples (Substitui alert())
        function alertModal(title, message, colorClass) {
            const modalHTML = `
                <div id="custom-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
                    <div class="bg-white rounded-xl p-6 max-w-sm w-full shadow-2xl transform transition-all duration-300 scale-100">
                        <div class="flex flex-col items-center">
                            <div class="p-3 inline-flex rounded-full ${colorClass} text-white">
                                <!-- Ícone de Alerta (Lucide icon: alert-triangle) -->
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                    <path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path>
                                </svg>
                            </div>
                            <h3 class="mt-4 text-lg font-bold text-gray-900">${title}</h3>
                            <p class="mt-2 text-sm text-gray-500 text-center">${message}</p>
                            <button onclick="closeModal()" class="mt-6 button bg-primary text-white hover:bg-indigo-700 w-full">
                                ${getT('button_understood')}
                            </button>
                        </div>
                    </div>
                </div>
            `;
            // Adiciona o modal ao corpo do documento
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeModal() {
            const modal = document.getElementById('custom-modal');
            if (modal) modal.remove();
        }

        // Inicialização: Renderiza a tela de configuração ao carregar
        window.onload = renderSetupScreen;
    </script>
</body>
</html>


